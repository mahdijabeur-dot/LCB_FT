<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contr√¥le Permanent LCB-FT ‚Äì Gestion des Risques Bancaires</title>

    <!-- Favicon -->
    <link rel="icon" href="assets/img/favicon.svg" type="image/x-icon">

    <!-- Feuille de style -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!-- Librairies externes -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
<div class="confidential-banner">
        ‚ö†Ô∏è DOCUMENT CONFIDENTIEL - USAGE INTERNE UNIQUEMENT ‚ö†Ô∏è
    </div>

    <header>
        <div class="header-content">
            <div class="logo">
                <div>
                    <h1>üîí Contr√¥le Permanent LCB-FT</h1>
                    <p>Syst√®me de Gestion des Risques Bancaires</p>
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Tableau de bord des statistiques -->
        <div class="dashboard">
            <div class="card total">
                <h3>Total Points de Contr√¥le</h3>
                <div class="value" id="totalPoints">0</div>
                <div class="label">Points analys√©s</div>
            </div>
            <div class="card conforme">
                <h3>Points Conformes</h3>
                <div class="value" id="pointsConformes">0</div>
                <div class="label">Conformit√© atteinte</div>
            </div>
            <div class="card mineur">
                <h3>√âcarts Mineurs</h3>
                <div class="value" id="pointsMineurs">0</div>
                <div class="label">√Ä surveiller</div>
            </div>
            <div class="card majeur">
                <h3>√âcarts Majeurs</h3>
                <div class="value" id="pointsMajeurs">0</div>
                <div class="label">Action requise</div>
            </div>
            <div class="card critique">
                <h3>√âcarts Critiques</h3>
                <div class="value" id="pointsCritiques">0</div>
                <div class="label">Urgent</div>
            </div>
        </div>

        <!-- Informations g√©n√©rales -->
        <div class="section">
            <h2 class="section-title">üìã Informations G√©n√©rales du Contr√¥le</h2>
            <div class="form-grid">
                <div class="form-group required">
                    <label for="reference">R√©f√©rence du Contr√¥le</label>
                    <input type="text" id="reference" placeholder="Ex: CTRL-LCB-2024-001">
                </div>
                <div class="form-group required">
                    <label for="dateControle">Date du Contr√¥le</label>
                    <input type="date" id="dateControle">
                </div>
                <div class="form-group required">
                    <label for="controleur">Contr√¥leur</label>
                    <input type="text" id="controleur" placeholder="Nom du contr√¥leur">
                </div>
                <div class="form-group required">
                    <label for="perimetre">P√©rim√®tre(s) du Contr√¥le</label>
                    <select id="perimetre" multiple onchange="afficherPointsControle()">
                        <option value="Contr√¥le EER">Contr√¥le EER (Entr√©e en Relation)</option>
                        <option value="Contr√¥le MAJ KYC">Contr√¥le MAJ KYC (Mise √† Jour)</option>
                        <option value="Contr√¥le Versement">Contr√¥le Versement</option>
                        <option value="Contr√¥le Retrait">Contr√¥le Retrait</option>
                        <option value="Contr√¥le OPA">Contr√¥le OPA (Ordre de Paiement)</option>
                        <option value="Contr√¥le OPD">Contr√¥le OPD (Ordre de Paiement D√©mat√©rialis√©)</option>
                        <option value="Contr√¥le Change Manuel">Contr√¥le Change Manuel</option>
                        <option value="Contr√¥le CBE">Contr√¥le CBE (Correspondant Bancaire √âtranger)</option>
                        <option value="Contr√¥le DS">Contr√¥le DS (D√©claration de Soup√ßon)</option>
                        <option value="Contr√¥le Filtage">Contr√¥le Filtrage Sanctions</option>
                        <option value="Contr√¥le Filtrage PPE">Contr√¥le Filtrage PPE</option>
                    </select>
                    <div class="form-help">Maintenez Ctrl (ou Cmd) pour s√©lectionner plusieurs p√©rim√®tres</div>
                </div>
                <div class="form-group required">
                    <label for="entite">Entit√© Contr√¥l√©e</label>
                    <input type="text" id="entite" placeholder="Saisir le nom de l'entit√©">
                </div>
                <div class="form-group required">
                    <label for="periodeControle">P√©riode Contr√¥l√©e</label>
                    <input type="text" id="periodeControle" placeholder="Ex: T1 2024 ou Jan-Mar 2024">
                </div>
            </div>
        </div>

        <!-- Points de contr√¥le -->
        <div class="section">
            <h2 class="section-title">‚úÖ Points de Contr√¥le LCB-FT</h2>
            <div id="alertePerimetre" class="alert alert-info">
                ‚ÑπÔ∏è S√©lectionnez un ou plusieurs p√©rim√®tres pour afficher les points de contr√¥le correspondants.
            </div>
            <div id="pointsControleContainer"></div>
        </div>

        <!-- Boutons d'action -->
        <div class="form-actions no-print">
            <button class="btn btn-success" onclick="sauvegarderControle()">üíæ Sauvegarder le Contr√¥le</button>
            <button class="btn btn-warning" onclick="reinitialiserFormulaire()">üîÑ R√©initialiser</button>
            <button class="btn btn-primary" onclick="genererPDF()">üìÑ G√©n√©rer PDF</button>
            <button class="btn btn-secondary" onclick="afficherControlesSauvegardesModal()">üìÇ Voir les Contr√¥les Sauvegard√©s</button>
        </div>

        <!-- Graphiques -->
        <div class="section">
            <h2 class="section-title">üìä Analyses et Statistiques</h2>
            <div class="charts-container">
                <div class="chart-wrapper">
                    <h3>R√©partition des R√©sultats</h3>
                    <div class="chart-canvas">
                        <canvas id="chartResultats"></canvas>
                    </div>
                </div>
                <div class="chart-wrapper">
                    <h3>R√©partition par Niveau de Criticit√©</h3>
                    <div class="chart-canvas">
                        <canvas id="chartCriticite"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section des contr√¥les sauvegard√©s -->
        <div class="section" id="sectionControlesSauvegardes" style="display: none;">
            <h2 class="section-title">üìÅ Contr√¥les Sauvegard√©s</h2>
            <div class="filter-section">
                <input type="text" id="rechercheControles" placeholder="üîç Rechercher par r√©f√©rence..." onkeyup="afficherControlesSauvegardes()">
                <select id="filtreControles" onchange="afficherControlesSauvegardes()">
                    <option value="all">Tous les statuts</option>
                    <option value="conforme">Conformes</option>
                    <option value="mineur">√âcarts mineurs</option>
                    <option value="majeur">√âcarts majeurs</option>
                    <option value="critique">√âcarts critiques</option>
                </select>
            </div>
            <div class="table-container">
                <table id="tableauControlesSauvegardes">
                    <thead>
                        <tr>
                            <th>R√©f√©rence</th>
                            <th>Date</th>
                            <th>Contr√¥leur</th>
                            <th>P√©rim√®tre(s)</th>
                            <th>Statut</th>
                            <th class="no-print">Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Donn√©es de r√©f√©rence (points de contr√¥le par p√©rim√®tre) -->
    <script src="assets/js/data.js"></script>

    <!-- Logique applicative -->
    <script src="assets/js/app.js"></script>
</body>
</html>
